{
  "version": 3,
  "sources": ["../../lib/index.js"],
  "sourcesContent": ["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getUserInfo = void 0;\nfunction cleanHeader(headerName) {\n  return headerName.replace(\"x-replit-user-\", \"\").replace(/-(.)/g, function(_, group1) {\n    return group1.toUpperCase();\n  });\n}\nvar getUserInfo = function(req) {\n  var headers = req.headers;\n  var userInfo = {};\n  for (var _i = 0, _a = Object.keys(headers); _i < _a.length; _i++) {\n    var headerName = _a[_i];\n    var headerValue = headers[headerName];\n    if (headerName.startsWith(\"x-replit-\") && headerValue) {\n      var cleanHeaderName = cleanHeader(headerName);\n      //check if property is meant to be an array\n      if (cleanHeaderName === 'roles' || cleanHeaderName === 'teams') {\n        userInfo[cleanHeaderName] = headerValue.split(',');\n      }\n      else {\n        userInfo[cleanHeaderName] = headerValue;\n      }\n    }\n  }\n  //check if userInfo is empty\n  if (Object.keys(userInfo).length === 0 && userInfo.constructor === Object) {\n    return null;\n  }\n  return userInfo;\n};\nexports.getUserInfo = getUserInfo;\n"],
  "mappings": ";AACA,OAAO,eAAe,SAAS,cAAc,EAAE,OAAO;AACtD,QAAQ,cAAc;AACtB,qBAAqB,YAAY;AAC/B,SAAO,WAAW,QAAQ,kBAAkB,IAAI,QAAQ,SAAS,SAAS,GAAG,QAAQ;AACnF,WAAO,OAAO;AAAA;AAAA;AAGlB,IAAI,cAAc,SAAS,KAAK;AAC9B,MAAI,UAAU,IAAI;AAClB,MAAI,WAAW;AACf,WAAS,KAAK,GAAG,KAAK,OAAO,KAAK,UAAU,KAAK,GAAG,QAAQ,MAAM;AAChE,QAAI,aAAa,GAAG;AACpB,QAAI,cAAc,QAAQ;AAC1B,QAAI,WAAW,WAAW,gBAAgB,aAAa;AACrD,UAAI,kBAAkB,YAAY;AAElC,UAAI,oBAAoB,WAAW,oBAAoB,SAAS;AAC9D,iBAAS,mBAAmB,YAAY,MAAM;AAAA,aAE3C;AACH,iBAAS,mBAAmB;AAAA;AAAA;AAAA;AAKlC,MAAI,OAAO,KAAK,UAAU,WAAW,KAAK,SAAS,gBAAgB,QAAQ;AACzE,WAAO;AAAA;AAET,SAAO;AAAA;AAET,QAAQ,cAAc;",
  "names": []
}
